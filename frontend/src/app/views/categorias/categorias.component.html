<h1 class="mb-4">Categorias</h1>
<button type="button" class="btn btn-light mb-2" data-bs-toggle="modal" data-bs-target="#modalCategoria">
    Nova categoria
</button>

<div class="table-responsive">
    <table class="table table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nome</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let c of categorias">
                <td>{{ c.id }}</td>
                <td>{{ c.nome }}</td>
                <td>
                    <button type="button" class="btn-table-td" (click)="buscarCategoriaPorId(c.id)" data-bs-toggle="modal" data-bs-target="#modalCategoria">
                        <i class="fa-regular fa-pen-to-square"></i>
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Modal -->
<div class="modal fade" id="modalCategoria" tabindex="-1" aria-hidden="true" #modalCategoria>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5">{{ editarCategoria ? 'Editar categoria' : 'Cadastrar categoria'}}</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="categoriaForm" (ngSubmit)="onSubmit()">
                    <div class="mb-3">
                        <label for="nome">Nome <span class="text-danger">*</span></label>
                        <input type="text" id="nome" formControlName="nome" class="form-control form-control-sm"
                            [ngClass]="{'is-invalid': categoriaForm.get('nome')?.invalid && categoriaForm.get('nome')?.touched}">
                        <div *ngIf="categoriaForm.get('nome')?.invalid && categoriaForm.get('nome')?.touched"
                            class="invalid-feedback">
                            Nome é obrigatório.
                        </div>
                    </div>
                    <div class="d-flex align-items-center">
                        <button type="submit" class="btn btn-dark">
                            {{ editarCategoria ? 'Salvar' : 'Cadastrar' }}
                        </button>
                        <button type="button" class="btn btn-light ms-2" data-bs-dismiss="modal">
                            Cancelar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>